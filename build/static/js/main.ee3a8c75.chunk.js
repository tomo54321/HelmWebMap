(this["webpackJsonpmapbox-react"]=this["webpackJsonpmapbox-react"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),l=a.n(r),s=(a(54),a(1)),c=a(2),i=a(5),u=a(4),p=a(6),d=a(9),m=a(10);function h(e){return{type:"alert:updateAlert",payload:{data:e}}}function f(){return{type:"alert:closeAlert",payload:{data:{show:!1}}}}function b(e){return{type:"user:updateUSER",payload:{user:e}}}var g=a(7),y=a(11),v=a(8),E=(a(63),a(26)),O=a.n(E),j="https://helmapp.net/api/v1/",k=O.a.create({baseURL:j,timeout:5e3}),C=a(20),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).mounted=!1,a.hazardClicked=a.hazardClicked.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"hazardClicked",value:function(e){var t=e.feature.properties.hazid;this.props.history.push("/hazard/"+t)}},{key:"render",value:function(){var e=this,t=this.props.map.hazards.map((function(t,a){return o.a.createElement(y.a,{key:"marker_hazard_"+t.id,coordinates:[t.lng,t.lat],properties:{hazid:t.id},onClick:e.hazardClicked})}));return o.a.createElement(y.b,{type:"symbol",id:"area_hazards",layout:{"icon-image":"hazard-pin"}},t)}}]),t}(o.a.Component),w=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};return!1!==e&&(t.lat1=e._sw.lat,t.lng1=e._sw.lng,t.lat2=e._ne.lat,t.lng2=e._ne.lng),k.get("/hazards",{params:t})},P=Object(d.b)((function(e){return{map:e.mapSettings}}))(Object(C.f)(N));function z(e){return{type:"map:updateMap",payload:{data:e}}}function x(e){return{type:"map:updateHazards",payload:e}}var S=Object(y.g)({accessToken:"pk.eyJ1IjoidG9tbzU0MzIxIiwiYSI6ImNqeDduY3QxMTA4aWMzdG52OGU0eXZxbjMifQ.t_8wOAKqfPvBx3BPK1Yliw"}),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onMapLoad=a.onMapLoad.bind(Object(g.a)(a)),a.handleIncomingLocation=a.handleIncomingLocation.bind(Object(g.a)(a)),a.onHazardsNeedUpdating=a.onHazardsNeedUpdating.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w().then((function(t){e.props.onUpdateHazards(t.data.payload)}))}},{key:"onMapLoad",value:function(e){var t=new v.GeolocateControl({trackUserLocation:!0});t.on("geolocate",this.handleIncomingLocation),e.addControl(t)}},{key:"handleIncomingLocation",value:function(e){this.props.onUpdateUser({location:e})}},{key:"onHazardsNeedUpdating",value:function(e,t){var a=this;w(t.target.getBounds()).then((function(e){a.props.onUpdateHazards(e.data.payload)}))}},{key:"render",value:function(){var e=this.props.map.markers.map((function(e,t){return o.a.createElement(y.a,{key:"markers_"+t,coordinates:e})}));return o.a.createElement(S,{style:"mapbox://styles/tomo54321/ck7g9h0g03g8j1ikij2wkb0du/draft",center:this.props.map.centerCoordinate,zoom:this.props.map.zoom,onStyleLoad:this.onMapLoad,onZoomEnd:this.onHazardsNeedUpdating,onDragEnd:this.onHazardsNeedUpdating},o.a.createElement(y.f,{className:"mapZoomControl"}),o.a.createElement(y.c,{className:"mapRotateControl"}),o.a.createElement(y.d,{className:"mapScale"}),this.props.children,o.a.createElement(y.b,{type:"symbol",id:"map_markers",layout:{"icon-image":"map-pin"}},e),o.a.createElement(y.b,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3066BE","line-width":5},id:"map_route_line"},o.a.createElement(y.a,{coordinates:this.props.map.routeLineCoords})))}}]),t}(o.a.Component),_=Object(d.b)((function(e){return{map:e.mapSettings}}),(function(e,t){return Object(m.a)({onUpdateHazards:x},e)}))(U),M=a(19),D=a(21),q=a.n(D),L=(a(93),function(e){function t(e){var a,n;Object(s.a)(this,t),n=Object(i.a)(this,Object(u.a)(t).call(this,e));var o=q.a.parse(e.location.search);return n.state={query:null!==(a=o.q)&&void 0!==a?a:""},n.onSubmit=n.onSubmit.bind(Object(g.a)(n)),n.onTextChange=n.onTextChange.bind(Object(g.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(e){if("/"!==this.props.location.pathname&&"/search"!==this.props.location.pathname)return this.props.history.push("/"),this.setState({query:""}),void e.preventDefault();var t="/search?"+q.a.stringify({q:this.state.query});this.props.history.push(t),e.preventDefault()}},{key:"onTextChange",value:function(e){"/search"===this.props.location.pathname&&this.props.history.push("/"),this.setState(Object(M.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return"/directions"===this.props.location.pathname?null:o.a.createElement("form",{action:"/search",method:"GET",onSubmit:this.onSubmit,className:"flex search-form shadow-map"},o.a.createElement("input",{type:"text",className:"search-bar",name:"query",autoComplete:"off",placeholder:"Search",value:this.state.query,onChange:this.onTextChange}),o.a.createElement("button",{className:"search-button"},o.a.createElement("i",{className:"material-icons"},"/"!==this.props.location.pathname&&"/search"!==this.props.location.pathname?"close":"search")))}}]),t}(o.a.Component)),R=Object(C.f)(L),A=(a(94),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={isClosing:!1},a.onClose=a.onClose.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClose",value:function(){var e=this;this.setState({isClosing:!0},(function(){setTimeout((function(){e.props.onClose(),e.setState({isClosing:!1})}),350)}))}},{key:"render",value:function(){return this.props.show?o.a.createElement("div",{className:"backdrop"},o.a.createElement("div",{className:"alert"+(this.state.isClosing?" close":"")},o.a.createElement("span",{className:"title"},"error"===this.props.type?"Oh No":"success"===this.props.type?"Success":"Info"),o.a.createElement("p",null,this.props.message),o.a.createElement("button",{className:"close-btn",onClick:this.onClose},"Close"))):null}}]),t}(o.a.Component)),I=(a(95),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(null===this.props.user.location||void 0===this.props.user.location.speed)return null;var e=2.237*this.props.user.location.speed;return e<.5?null:o.a.createElement("div",{className:"speedo"},o.a.createElement("span",{className:"fig"},e.toFixed(2)),o.a.createElement("span",{className:"unit"},"mph"))}}]),t}(o.a.Component)),F=Object(d.b)((function(e){return{user:e.user}}))(I),T=(a(96),function(){return o.a.createElement("div",{className:"spinner"})}),W=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this,t=this.props.list.map((function(t,a){return o.a.createElement("button",{key:a,className:"result-row",onClick:function(){e.props.onResultClick(t)}},o.a.createElement("span",{className:"place_name"},t.name),o.a.createElement("span",{className:"place_type"},e.capitalizeFirstLetter(t.category.name.replace("_"," "))))}));return o.a.createElement("div",{className:"list-container"},0===this.props.list.length?o.a.createElement("span",{className:"no-res-message"},"No results found"):t)}}]),t}(o.a.Component),G=(a(97),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,query:"",results:[]},a.setQuery=a.setQuery.bind(Object(g.a)(a)),a.getResults=a.getResults.bind(Object(g.a)(a)),a.onResultClick=a.onResultClick.bind(Object(g.a)(a)),a.mounted=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.setQuery((function(){e.getResults()}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.onUpdateMap({markers:[]})}},{key:"setQuery",value:function(e){var t=q.a.parse(this.props.location.search);void 0===t.q||""===t.q?this.props.history.push("/"):this.setState({query:t.q},e)}},{key:"getResults",value:function(){var e=this;k.get("places",{params:{query:this.state.query}}).then((function(t){var a=t.data;if(e.setState({loading:!1,results:a.payload}),0!==a.payload.length){var n=[],o=0,r=0;a.payload.forEach((function(e,t){o+=e.latitude,r+=e.longitude,n.push([e.longitude,e.latitude])})),o/=a.payload.length,r/=a.payload.length,e.props.onUpdateMap({markers:n,centerCoordinate:[r,o],zoom:[10]})}})).catch((function(t){e.props.onOpenAlert({show:!0,type:"error",message:t.message}),e.props.history.push("/")}))}},{key:"onResultClick",value:function(e){this.props.onUpdateMap({zoom:[16],centerCoordinate:[e.longitude,e.latitude]}),this.props.history.push("/place/"+e.id)}},{key:"render",value:function(){return o.a.createElement("div",{className:"window search-results-list shadow-map-bottom"},this.state.loading?o.a.createElement(T,null):o.a.createElement(W,{list:this.state.results,onResultClick:this.onResultClick}))}}]),t}(o.a.Component)),H=Object(d.b)((function(e){return{}}),(function(e,t){return Object(m.a)({onOpenAlert:h,onUpdateMap:z},e)}))(Object(C.f)(G)),Y=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"section"},o.a.createElement("span",{className:"title"},this.props.title),this.props.children)}}]),t}(o.a.Component);a(98);function B(e){return{type:"place:updatePlace",payload:{data:e}}}function Q(){return{type:"place:clearPlace",payload:{place:{id:0,query:""}}}}var J=function(e){var t,a=null===e.place.nearby_moorings?null:e.place.nearby_moorings.map((function(t,a){return o.a.createElement("button",{className:"nearby-mooring-btn",key:a,onClick:function(){e.history.push("/place/"+t.id)}},o.a.createElement("span",{className:"roundedBtn"},o.a.createElement("i",{className:"material-icons"},"directions_boat")),o.a.createElement("span",{className:"name"},t.name),o.a.createElement("span",{className:"dist"},t.distance.toFixed(2),"mi"))}));return o.a.createElement("div",{className:"pb"},o.a.createElement("span",{className:"title"},e.place.name),o.a.createElement("span",{className:"type"},(t=e.place.category.name,t.charAt(0).toUpperCase()+t.slice(1)).replace("_"," ")),o.a.createElement("button",{type:"button",className:"btn btn-direction",onClick:function(){e.history.push("/directions?to="+e.place.latitude+","+e.place.longitude)}},"Get Directions"),o.a.createElement(Y,{title:"Address"},o.a.createElement("p",null,e.place.name,null!==e.place.road?", "+e.place.road:null,null!==e.place.city&&e.place.city!==e.place.name?", "+e.place.city:null,null!==e.place.county?", "+e.place.county:null,null!==e.place.postcode?", "+e.place.postcode:null)),null!==e.place.phone_number||null!==e.place.website_address?o.a.createElement(Y,{title:"Contact"},o.a.createElement("table",null,o.a.createElement("tbody",null,null!==e.place.phone_number?o.a.createElement("tr",null,o.a.createElement("th",null,"Phone Number"),o.a.createElement("td",null,o.a.createElement("a",{href:"tel:"+e.place.phone_number,title:"Call "+e.place.name},e.place.phone_number))):null,null!==e.place.website_address?o.a.createElement("tr",null,o.a.createElement("th",null,"Website"),o.a.createElement("td",null,o.a.createElement("a",{href:e.place.website_address,target:"_blank",rel:"noreferer"},e.place.website_address))):null))):null,null!==e.place.nearby_moorings&&e.place.nearby_moorings.length>0?o.a.createElement(Y,{title:"Nearby Moorings"},o.a.createElement("div",{className:"flex flex-wrap"},a)):null,"mooring"===e.place.category.name?o.a.createElement(Y,{title:"Details"},o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Type"),o.a.createElement("td",null,e.place.data.data.type)),o.a.createElement("tr",null,o.a.createElement("th",null,"Allowed Mooring"),o.a.createElement("td",null,e.place.data.data.how)),o.a.createElement("tr",null,o.a.createElement("th",null,"Length"),o.a.createElement("td",null,e.place.data.data.length," metres")),o.a.createElement("tr",null,o.a.createElement("th",null,"Approx # of boats"),o.a.createElement("td",null,e.place.data.data.approx)),o.a.createElement("tr",null,o.a.createElement("th",null,"Price"),o.a.createElement("td",null,"\xa3",e.place.data.data.price.toFixed(2)))))):null,void 0!==e.place.data.data&&void 0!==e.place.data.data.about?o.a.createElement(Y,{title:"About"},e.place.data.data.about):null)},Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,place:{},placeId:e.match.params.id},a.mounted=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPlace(),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.onUpdateMap({markers:[]})}},{key:"getPlace",value:function(){var e=this;k.get("/places/"+this.state.placeId).then((function(t){if(e.mounted){var a=t.data;e.setState({loading:!1,place:a.payload},(function(){e.props.onUpdateMap({zoom:[16],centerCoordinate:[e.state.place.longitude,e.state.place.latitude],markers:[[e.state.place.longitude,e.state.place.latitude]]}),e.props.onUpdatePlace({query:a.payload.name,id:a.payload.id,latitude:a.payload.latitude,longitude:a.payload.longitude})}))}})).catch((function(t){e.props.onOpenAlert({show:!0,type:"error",message:t.message}),e.mounted&&e.props.history.push("/")}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.match.params.id!==this.props.match.params.id&&this.setState({loading:!0,place:{}},(function(){a.getPlace()}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"window place-view shadow-map-bottom"},this.state.loading?o.a.createElement(T,null):o.a.createElement(J,{history:this.props.history,place:this.state.place}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.id!==t.placeId?{placeId:e.match.params.id}:null}}]),t}(o.a.Component),K=Object(d.b)((function(e){return{}}),(function(e,t){return Object(m.a)({onOpenAlert:h,onUpdateMap:z,onUpdatePlace:B,onClearPlace:Q},e)}))(Object(C.f)(Z)),X=a(48),$=(a(99),a(47)),V=a.n($),ee=function(e){return o.a.createElement("div",{className:"route-details flex flex-between"},o.a.createElement("div",{className:"col flex-shink"},o.a.createElement("span",{className:"via"},e.data[e.selectedRoute].legs[0].summary)),o.a.createElement("div",{className:"col"},o.a.createElement("span",{className:"distance"},(e.data[e.selectedRoute].distance/1e3/1.609).toFixed(2)," mi"),o.a.createElement("span",{className:"duration"},function(e){e=60*e*60;var t=Math.floor(e/3600);e-=60*t*60;var a=Math.floor(e/60);e-=60*a;var n=Math.round(e);return a<10&&(a="0"+a),n<10&&(n="0"+n),0===t?a+"mins "+n+"s":t+"hrs "+a+"mins"}(e.data[e.selectedRoute].distance/1e3/7.45))))},te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,fromq:"",toq:"",fromPlace:null,toPlace:null,searchFor:1,resultList:[],selectedRoute:0,directionData:null},a.mounted=!1,a.gettingDirections=!1,a.onTextChange=a.onTextChange.bind(Object(g.a)(a)),a.checkPossibleLocations=a.checkPossibleLocations.bind(Object(g.a)(a)),a.onSearchClicked=a.onSearchClicked.bind(Object(g.a)(a)),a.onResultClick=a.onResultClick.bind(Object(g.a)(a)),a.doGetDirections=a.doGetDirections.bind(Object(g.a)(a)),a.getPolyline=a.getPolyline.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.checkPossibleLocations()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.onUpdateMap({markers:[],routeLineCoords:[]})}},{key:"checkPossibleLocations",value:function(){var e=this,t=q.a.parse(this.props.location.search);if(0===this.props.place.id){if(void 0!==t.from){var a=t.from.split(",");if(isNaN(a[0])||isNaN(a[1]))return;this.setState({fromq:a[0]+", "+a[1],fromPlace:{lat:a[0],lng:a[1]}},(function(){e.doGetDirections()}))}if(void 0!==t.to){var n=t.to.split(",");if(isNaN(n[0])||isNaN(n[1]))return;this.setState({toq:n[0]+", "+n[1],toPlace:{lat:n[0],lng:n[1]}},(function(){e.doGetDirections()}))}}else this.setState({toq:this.props.place.query,toPlace:{lat:this.props.place.latitude,lng:this.props.place.longitude}})}},{key:"onTextChange",value:function(e){var t,a="";"fromq"===e.target.name?a="fromPlace":"toq"===e.target.name&&(a="toPlace"),this.setState((t={},Object(M.a)(t,e.target.name,e.target.value),Object(M.a)(t,a,null),Object(M.a)(t,"directionData",null),t))}},{key:"onSearchClicked",value:function(e,t){var a=this;this.setState({loading:!0,searchFor:t},(function(){a.mounted&&k.get("places",{params:{query:1===t?a.state.fromq:a.state.toq}}).then((function(e){if(a.mounted){var t=e.data;a.setState({loading:!1,resultList:t.payload})}})).catch((function(e){a.props.onOpenAlert({show:!0,type:"error",message:e.message})}))})),e.preventDefault()}},{key:"onResultClick",value:function(e){var t=this;1===this.state.searchFor&&this.setState({fromq:e.name,fromPlace:{lat:e.latitude,lng:e.longitude},resultList:[]},(function(){t.doGetDirections()})),2===this.state.searchFor&&this.setState({toq:e.name,toPlace:{lat:e.latitude,lng:e.longitude},resultList:[]},(function(){t.doGetDirections()}))}},{key:"getPolyline",value:function(e){var t=[];return e.map((function(e,a){e.steps.map((function(e,a){V.a.decode(e.geometry).map((function(e,a){t=[].concat(Object(X.a)(t),[[e[1],e[0]]])}))}))})),t}},{key:"doGetDirections",value:function(){var e=this;null!==this.state.fromPlace&&null!==this.state.toPlace&&!1===this.gettingDirections&&(this.gettingDirections=!0,this.setState({loading:!0},(function(){var t=e.state.fromPlace.lng+","+e.state.fromPlace.lat+";",a="https://route.helmapp.net/route/v1/driving/"+(t+=e.state.toPlace.lng+","+e.state.toPlace.lat)+"?overview=false&alternatives=true&steps=true&hints=;";e.props.history.push("/directions?from="+e.state.fromPlace.lat+","+e.state.fromPlace.lng+"&to="+e.state.toPlace.lat+","+e.state.toPlace.lng),O.a.get(a).then((function(t){var a=t.data;e.gettingDirections=!1;var n=e.getPolyline(a.routes[0].legs);e.props.onUpdateMap({markers:[[e.state.fromPlace.lng,e.state.fromPlace.lat],[e.state.toPlace.lng,e.state.toPlace.lat]],zoom:[10.5],centerCoordinate:[(parseFloat(e.state.fromPlace.lng)+parseFloat(e.state.toPlace.lng))/2,(parseFloat(e.state.fromPlace.lat)+parseFloat(e.state.toPlace.lat))/2],routeLineCoords:n}),e.setState({loading:!1,directionData:a.routes})})).catch((function(t){e.gettingDirections=!1,e.props.onOpenAlert({show:!0,type:"error",message:t.message})}))})))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"window directions-overview shadow-map-bottom"},o.a.createElement("div",{className:"flex space-between px-4 py-2"},o.a.createElement("span",{className:"title"},"Directions"),o.a.createElement("button",{className:"close-button",onClick:function(){e.props.history.push("/")}},o.a.createElement("i",{className:"material-icons"},"close"))),this.state.loading?o.a.createElement(T,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{method:"GET",className:"flex search-form mt-2",onSubmit:function(t){e.onSearchClicked(t,1)}},o.a.createElement("input",{type:"text",className:"search-bar",name:"fromq",autoComplete:"off",onChange:this.onTextChange,placeholder:"Where From?",value:this.state.fromq}),o.a.createElement("button",{className:"search-button"},o.a.createElement("i",{className:"material-icons"},"search"))),o.a.createElement("form",{method:"GET",className:"flex search-form mt-2",onSubmit:function(t){e.onSearchClicked(t,2)}},o.a.createElement("input",{type:"text",className:"search-bar",name:"toq",autoComplete:"off",onChange:this.onTextChange,placeholder:"Where To?",value:this.state.toq}),o.a.createElement("button",{className:"search-button"},o.a.createElement("i",{className:"material-icons"},"search")))),!1===this.state.loading&&this.state.resultList.length>0?o.a.createElement("div",{className:"search-results-list"}," ",o.a.createElement(W,{list:this.state.resultList,onResultClick:this.onResultClick})," "):null,!1===this.state.loading&&null!==this.state.directionData?o.a.createElement(ee,{selectedRoute:this.state.selectedRoute,data:this.state.directionData}):null)}}]),t}(o.a.Component),ae=Object(d.b)((function(e){return{place:e.place}}),(function(e,t){return Object(m.a)({onOpenAlert:h,onUpdateMap:z},e)}))(Object(C.f)(te)),ne={source:{type:"geojson",data:j+"places/poi"},layout:{"icon-image":["concat",["get","icon"],"-15"],"text-field":["get","title"],"text-font":["DIN Pro Regular"],"text-offset":[0,.6],"text-anchor":"top","text-size":12,"text-max-width":7}},oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onCorePOIPressed=a.onCorePOIPressed.bind(Object(g.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onCorePOIPressed",value:function(e){var t=[[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]],a=e.target.queryRenderedFeatures(t,{layers:["important_sailing_pois_layer"]});void 0!==a[0].properties.place_id&&this.props.history.push("/place/"+a[0].properties.place_id)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.e,{id:"important_sailing_pois",geoJsonSource:ne.source}),o.a.createElement(y.b,{id:"important_sailing_pois_layer",type:"symbol",layout:ne.layout,sourceId:"important_sailing_pois",onClick:this.onCorePOIPressed}))}}]),t}(o.a.Component),re=Object(C.f)(oe),le=(a(100),a(101),a(34)),se=a.n(le),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,hazard:{},hazardId:e.match.params.id},a.mounted=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getHazard(),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getHazard",value:function(){var e=this;k.get("/hazards/"+this.state.hazardId).then((function(t){if(e.mounted){var a=t.data;e.setState({loading:!1,hazard:a.payload},(function(){e.props.onUpdateMap({zoom:[16],centerCoordinate:[e.state.hazard.lng,e.state.hazard.lat]})}))}})).catch((function(t){e.props.onOpenAlert({show:!0,type:"error",message:t.message}),e.mounted&&e.props.history.push("/")}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.match.params.id!==this.props.match.params.id&&this.setState({loading:!0,hazard:{}},(function(){a.getHazard()}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"window place-view shadow-map-bottom"},this.state.loading?o.a.createElement(T,null):o.a.createElement(ie,{data:this.state.hazard}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.id!==t.hazardId?{hazardId:e.match.params.id}:null}}]),t}(o.a.Component),ie=function(e){return o.a.createElement("div",{className:"pb"},o.a.createElement("span",{className:"title"},e.data.hazard_type.name," Report"),o.a.createElement("span",{className:"type"},e.data.user.username),o.a.createElement(Y,{title:"Details"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"First spotted at"),o.a.createElement("td",null,se.a.utc(e.data.created_at).local().format("MMMM Do YYYY, h:mm a"))),o.a.createElement("tr",null,o.a.createElement("th",null,"Last spotted"),o.a.createElement("td",null,se.a.utc(e.data.updated_at).local().format("MMMM Do YYYY, h:mm a")))))),e.data.comment?o.a.createElement(Y,{title:"Comment"},e.data.comment):null)},ue=Object(d.b)((function(e){return{}}),(function(e,t){return Object(m.a)({onOpenAlert:h,onUpdateMap:z},e)}))(Object(C.f)(ce)),pe=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(_,{onUpdateUser:this.props.onUpdateUser},o.a.createElement(re,null),o.a.createElement(P,null)),o.a.createElement(F,null),o.a.createElement("div",{className:"viewer"},o.a.createElement(R,null),o.a.createElement(C.c,null,o.a.createElement(C.a,{exact:!0,path:"/search"},o.a.createElement(H,null)),o.a.createElement(C.a,{exact:!0,path:"/place/:id"},o.a.createElement(K,null)),o.a.createElement(C.a,{exact:!0,path:"/hazard/:id"},o.a.createElement(ue,null)),o.a.createElement(C.a,{exact:!0,path:"/directions"},o.a.createElement(ae,null)))),o.a.createElement(A,Object.assign({},this.props.alert,{onClose:this.props.onCloseAlert})))}}]),t}(o.a.Component),de=Object(d.b)((function(e){return{user:e.user,alert:e.alert}}),(function(e,t){return Object(m.a)({onCloseAlert:f,onUpdateUser:b},e)}))(pe),me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function he(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var fe=a(16),be=a(18);var ge=Object(m.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"user:updateUSER":var o=Object(be.a)({},e,{},n.user);return o;default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"alert:updateAlert":var o=Object(be.a)({},e,{},n.data);return o;case"alert:closeAlert":return n;default:return e}},place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"place:updatePlace":var o=Object(be.a)({},e,{},n.data);return o;case"place:clearPlace":return n;default:return e}},mapSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"map:updateMap":var o=Object(be.a)({},e,{},n.data);return o;case"map:updateHazards":var r=Object(be.a)({},e,{hazards:n});return r;default:return e}}}),ye=Object(m.c)(ge,{user:{name:"",accessToken:"",location:null},place:{query:"",id:0},alert:{show:!1},mapSettings:{zoom:[10],centerCoordinate:[1.605595,52.596973],markers:[],routeLineCoords:[],hazards:[]}});l.a.render(o.a.createElement((function(){return o.a.createElement(fe.a,null,o.a.createElement(d.a,{store:ye},o.a.createElement(de,null)))}),null),document.getElementById("app")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):he(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):he(t,e)}))}}()},49:function(e,t,a){e.exports=a(103)},54:function(e,t,a){},63:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[49,1,2]]]);